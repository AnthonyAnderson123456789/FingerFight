(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[101],{394:t=>{t.exports={main:"battle_main__ubBjn",image:"battle_image__tc3e3",battle:"battle_battle__rRiVi",pulse:"battle_pulse__44tr3",disabledButton:"battle_disabledButton__ctvUX",overlay:"battle_overlay__dSYWS"}},7161:(t,e,n)=>{Promise.resolve().then(n.bind(n,8947))},8947:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>y});var i=n(5155),a=n(2115),u=n(5219),l=n(1681),p=n(394),r=n.n(p);let s=[{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],name:"battleCounted",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"battles",outputs:[{internalType:"uint256",name:"player1ID",type:"uint256"},{internalType:"uint256",name:"player2ID",type:"uint256"},{internalType:"uint256",name:"p1Score",type:"uint256"},{internalType:"uint256",name:"p2Score",type:"uint256"},{internalType:"bool",name:"finished",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],name:"battlesByPlayerID",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"creator",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"p1Score",type:"uint256"},{internalType:"uint256",name:"p2Score",type:"uint256"}],name:"finalizeAndUpdate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"p1Score",type:"uint256"},{internalType:"uint256",name:"p2Score",type:"uint256"}],name:"finalizeLastBattle",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"playerID",type:"uint256"}],name:"getRecord",outputs:[{internalType:"uint256",name:"wins",type:"uint256"},{internalType:"uint256",name:"losses",type:"uint256"},{internalType:"uint256",name:"ties",type:"uint256"},{internalType:"uint256",name:"level",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"lastCreatedBattleByAddress",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"playerCountPerAddress",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"playerLevel",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"players",outputs:[{internalType:"string",name:"name",type:"string"},{internalType:"address",name:"player_addr",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_name",type:"string"}],name:"registerPlayer",outputs:[{internalType:"uint256",name:"playerID",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"player1ID",type:"uint256"},{internalType:"uint256",name:"player2ID",type:"uint256"}],name:"requestBattle",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"totalLosses",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"totalTies",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"totalWins",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}];function y(){let[t,e]=(0,a.useState)("Ready"),[n,p]=(0,a.useState)(!1),[y,o]=(0,a.useState)(null),[m,c]=(0,a.useState)(null),d=(0,a.useRef)(0),b=(0,a.useRef)(0);async function f(){if(!m)return void alert("Contract not loaded.");let t=d.current,e=b.current;try{let n=await m.finalizeAndUpdate(t,e);await n.wait(),window.location.href="/main"}catch(t){console.error("Failed to finalize battle:",t),alert("Could not finalize battle.")}}return(0,a.useEffect)(()=>{!async function(){if(!window.ethereum)return;let t=new u.k(window.ethereum),e=await t.getSigner();c(new l.NZ("0xF2cD66B329205dB6f929BfAA96e49585897C8377",s,e))}();let t=["Ready","Set","Go"],n=0,i=setInterval(()=>{n<t.length?(e(t[n]),n++):(e(10),p(!0),clearInterval(i),function(){let t=setInterval(()=>{e(e=>{if("number"==typeof e)if(e>0)return e-1;else{clearInterval(t),p(!1);let e=d.current,n=b.current;return e>n?o("Player 1 Wins!"):n>e?o("Player 2 Wins!"):o("It's a Tie!"),0}return e})},1e3)}())},1e3);return()=>clearInterval(i)},[]),(0,i.jsxs)("div",{className:r().main,children:[(0,i.jsx)("img",{className:r().image,src:"/battle.jpg",alt:"FingerFight",width:1e3,height:1e3}),(0,i.jsxs)("div",{className:r().battle,children:[(0,i.jsx)("button",{disabled:!n,className:n?"":r().disabledButton,onClick:function(){n&&(d.current+=1)},children:"Press Quickly!"}),(0,i.jsx)("h1",{children:t}),(0,i.jsx)("button",{disabled:!n,className:n?"":r().disabledButton,onClick:function(){n&&(b.current+=1)},children:"Press Quickly!"})]}),y&&(0,i.jsxs)("div",{className:r().overlay,children:[(0,i.jsx)("h2",{children:y}),(0,i.jsx)("button",{onClick:f,children:"Return"})]})]})}}},t=>{var e=e=>t(t.s=e);t.O(0,[149,219,441,684,358],()=>e(7161)),_N_E=t.O()}]);